<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>waifu2x Avisynth Plugin</title>
<meta charset="utf-8">
<meta name="description" content="waifu2x Avisynth Plugin">
<meta name="author" content="sunnyone">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="shortcut icon" href="">
</head>
<body>

    <nav class="navbar navbar-default navbar-static-top">
      <div class="container">
        <div class="navbar-header">
          <!--
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button> -->
          <a class="navbar-brand" href="#">waifu2xAvisynth</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <!--
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Dropdown <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
          </ul>
        -->
          <ul class="nav navbar-nav navbar-right">
            <li><a href="https://github.com/sunnyone/Waifu2xAvisynth/releases/download/0.0.1/Waifu2xAvisynth-0.0.1.zip">Download</a></li>
            <li><a href="#usage">Usage</a></li>
            <li><a href="#reference">Reference</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

  <div class="container" role="main">
    <h1>waifu2x Avisynth Plugin</h1>
    <div class="row">
      <div class="col-md-8">
        <p style="font-size: larger">
          waifu2xAvisynth は、<a href="http://waifu2x.udp.jp/">waifu2x</a>の変換処理をAvisynthのフィルタとして利用するプラグインです。
          waifu2xのC++実装である<a href="https://github.com/WL-Amigo/waifu2x-converter-cpp">waifu2x-converter-cpp</a>を内部的に利用しています。
        </p>

        <p>
          <a class="btn btn-primary btn-lg" href="https://github.com/sunnyone/Waifu2xAvisynth/releases/download/0.0.1/Waifu2xAvisynth-0.0.1.zip"role="button">
            ダウンロード</a>
        </p>
      </div>

      <div class="col-md-4"><p>
      <img src="img/vdub-miku-scaling.png" class="img-responsive" />
      <figcaption>
        ▲waifu2x呼び出しを含むavsを<a href="http://www.virtualdub.org/">VirtualDub</a>で読んでいる様子
        (<a href="http://piapro.net/en_for_creators.html">Hatsune Miku by Cryption Future Media, INC. CC BY-NC</a>)
      </p>
      </div>
    </div>

    <h2>必要環境</h2>
    <ul>
      <li>Avisynth 2.6/x86</li>
      <li>潤沢なCPUリソース</li>
    </ul>
    <p>
      Waifu2xフィルタは非常に重く、作者のCore i5-3570S (<s>Haswell</s> Ivy Bridge) 環境では、出力解像度600x928で0.02fpsほどでした。
      Wineでも動くと思いますが、確認していません。
    </p>

    <h2 id="usage">使い方</h2>
    <p>
      Waifu2xAvisynth.zipをどこかに展開後、Waifu2xプラグインを呼び出すようAvisynthスクリプトを記述し、
      <a href="http://www.avisynth.info/?AVS2AVI">avs2avi</a>,
      <a href="http://avisynth.nl/index.php/Avs2pipemod">avs2pipemod</a>などの
      出力ソフトウェアで出力します。
    </p>

    <p>
      好きなフォルダで構いませんが、デフォルトではdllのあるフォルダからmodelsフォルダを探し出すので、
      dllとmodelsフォルダは一緒に配置することをおすすめします。
    <p>

    <p>
      img.jpgを2倍に変換するスクリプト例(1フレームのみ)
    </p>

    <pre>LoadPlugin("c:\opt\waifu2xAvisynth\waifu2xAvisynth.dll")
# AviSource("c:\temp\source.avi") などなど様々な読み込み処理
ImageSource("c:\temp\img.jpg", end=0)
Waifu2x(nr=1, scale=2)</pre>

    <p>変換コマンド例<p>
    <pre>avs2avi sample.avs sample.avi</pre>

    <p>
    詳しいAvisynthの使い方については、<a href="http://www.avisynth.info/">Avisynth.info</a>などを参照してください。
    </p>

    <p>
    なお、waifu2x-converter-cppと異なり、縮小処理は実装していません。
    2の倍数にならない場合は、Waifu2x()呼び出し後に、LanczosResize()などでリサイズしてください。
    </p>

    <p>
    また、プレビューに耐えないほど遅いので、VirtualDubなどのGUIプレビューが可能なアプリケーションで
    .avsファイルを開く際は十分注意してください。
    </p>

    <p>
        また、途中経過をOutputDebugStringで出力しています。
        <a href="https://technet.microsoft.com/ja-jp/sysinternals/bb896647.aspx">DebugView</a>
        等で確認していただくと、状況がわかって便利です。
    </p>

    <h2 id="reference">Waifu2x関数</h2>
    <table class="table">
      <tr><th>引数名</th><th>デフォルト値</th><th>範囲</th><th>説明</th></tr>
      <tr><td>nr</td><td>1</td><td>0, 1, 2</td><td>ノイズリダクションレベル。0で無効。</td></tr>
      <tr><td>scale</td><td>2</td><td>2, 4, 8...</td><td>倍率。2の累乗。1で拡大無効。</td></tr>
      <tr><td>models</td><td>(dllと同じパス)</td><td>パス</td><td>modelsフォルダのパス</td></tr>
      <tr><td>jobs</td><td>(コア数)</td><td>整数。0で自動(コア数)</td><td>ジョブ数</td></tr>
    </table>

    <footer class="footer">
      <div class="container">
        <p class="text-muted">waifu2xAvisynth by <a href="http://sunnyone.org/">sunnyone</a></p>
      </div>
    </footer>
  </div>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

  <script type='text/javascript'>
    var _paq = _paq || [];
    _paq.push(["setCookieDomain", "*.sunnyone.org"]);
    _paq.push(["setDomains", ["*.sunnyone.org"]]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//sa.sunnyone.org/piwik/";
      _paq.push(['setTrackerUrl', u+'piwik.php']);
      _paq.push(['setSiteId', 2]);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <noscript><p><img alt='' src='//sa.sunnyone.org/piwik/piwik.php?idsite=2' style='border:0;'/></p></noscript>
</body>
</html>
